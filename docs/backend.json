{
  "entities": {
    "UserProfile": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "UserProfile",
      "type": "object",
      "description": "Represents a user's profile in the system.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the UserProfile entity."
        },
        "email": {
          "type": "string",
          "description": "User's email address.",
          "format": "email"
        },
        "firstName": {
          "type": "string",
          "description": "User's first name."
        },
        "lastName": {
          "type": "string",
          "description": "User's last name."
        },
        "skills": {
          "type": "array",
          "description": "List of user's skills.",
          "items": {
            "type": "string"
          }
        },
        "passion": {
          "type": "string",
          "description": "User's passion or professional interests."
        },
        "availability": {
          "type": "string",
          "description": "User's weekly availability."
        },
        "languages": {
          "type": "array",
          "description": "List of languages spoken by the user.",
          "items": {
            "type": "string"
          }
        },
        "hackathonInterests": {
          "type": "array",
          "description": "List of hackathon interests.",
          "items": {
            "type": "string"
          }
        },
        "socialLinks": {
          "type": "array",
          "description": "List of social media links.",
          "items": {
            "type": "string"
          }
        },
        "pulseIndex": {
          "type": "number",
          "description": "A score representing user's activity and collaboration."
        },
        "avatar": {
          "type": "string",
          "description": "An ID referencing a placeholder image for the user's avatar."
        }
      },
      "required": [
        "id",
        "email",
        "firstName",
        "lastName",
        "skills",
        "passion",
        "availability",
        "languages",
        "hackathonInterests",
        "pulseIndex",
        "avatar"
      ]
    },
    "TeamProfile": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "TeamProfile",
      "type": "object",
      "description": "Represents a team's profile.",
      "properties": {
        "name": {
          "type": "string",
          "description": "Team's name."
        },
        "logo": {
          "type": "string",
          "description": "An ID referencing a placeholder image for the team's logo."
        },
        "projectDescription": {
          "type": "string",
          "description": "Description of the team's project."
        },
        "openRoles": {
          "type": "array",
          "description": "List of open roles in the team.",
          "items": {
            "type": "string"
          }
        },
        "requiredSkills": {
          "type": "array",
          "description": "List of required skills for the team.",
          "items": {
            "type": "string"
          }
        },
        "teamMemberIds": {
          "type": "array",
          "description": "References to UserProfiles. (Relationship: TeamProfile 1:N UserProfile)",
          "items": {
            "type": "string"
          }
        },
        "createdAt": {
          "type": "string",
          "format": "date-time",
          "description": "Timestamp when the team was created."
        }
      },
      "required": [
        "name",
        "logo",
        "projectDescription",
        "teamMemberIds",
        "createdAt"
      ]
    },
    "HackathonListing": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "HackathonListing",
      "type": "object",
      "description": "Represents a hackathon event listing.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the HackathonListing entity."
        },
        "eventName": {
          "type": "string",
          "description": "Name of the hackathon event."
        },
        "logo": {
          "type": "string",
          "description": "An ID referencing a placeholder image for the hackathon's logo."
        },
        "eventDetails": {
          "type": "string",
          "description": "Detailed description of the event."
        },
        "registrationLink": {
          "type": "string",
          "description": "Link to the registration page.",
          "format": "uri"
        },
        "startDate": {
          "type": "string",
          "description": "Start date and time of the hackathon.",
          "format": "date-time"
        },
        "endDate": {
          "type": "string",
          "description": "End date and time of the hackathon.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "eventName",
        "eventDetails",
        "registrationLink",
        "startDate",
        "endDate",
        "logo"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "google.com"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}",
        "definition": {
          "entityName": "UserProfile",
          "schema": {
            "$ref": "#/backend/entities/UserProfile"
          },
          "description": "Stores user profiles. Path-based ownership ensures only the user can access their own profile.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier for the user."
            }
          ]
        }
      },
      {
        "path": "/teams/{teamId}",
        "definition": {
          "entityName": "TeamProfile",
          "schema": {
            "$ref": "#/backend/entities/TeamProfile"
          },
          "description": "Stores team profiles. Includes 'teamMemberIds' array for authorization independence. Used to determine team membership and access rights.",
          "params": [
            {
              "name": "teamId",
              "description": "The unique identifier for the team."
            }
          ]
        }
      },
      {
        "path": "/hackathons/{hackathonId}",
        "definition": {
          "entityName": "HackathonListing",
          "schema": {
            "$ref": "#/backend/entities/HackathonListing"
          },
          "description": "Stores hackathon listings. Publicly accessible data.",
          "params": [
            {
              "name": "hackathonId",
              "description": "The unique identifier for the hackathon event."
            }
          ]
        }
      }
    ],
    "reasoning": "The Firestore structure is designed to support the core features of the Nexus Teams application, focusing on user profiles, team profiles, and hackathon listings. The design emphasizes authorization independence, clarity, and scalability. User profiles are stored under `/users/{userId}` for private user data. Team profiles are stored in the `/teams/{teamId}` collection. Hackathon listings are in the `/hackathons/{hackathonId}` collection and are publicly accessible.\n\nAuthorization Independence: Authorization is achieved primarily through path-based ownership for user profiles. Team access control is managed via a `teamMemberIds` field in each team profile. This field is critical for authorization logic without needing `get()` calls in security rules.\n\nQAPs Support: This structure supports QAPs by segregating data based on access needs. User profiles are private, team profiles are accessible to team members, and hackathon listings are public. This separation simplifies security rules and ensures that list operations are secure."
  }
}
