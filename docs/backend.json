{
  "entities": {
    "UserProfile": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "UserProfile",
      "type": "object",
      "description": "Represents a user's profile in the system.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the UserProfile entity."
        },
        "email": {
          "type": "string",
          "description": "User's email address.",
          "format": "email"
        },
        "firstName": {
          "type": "string",
          "description": "User's first name."
        },
        "lastName": {
          "type": "string",
          "description": "User's last name."
        },
        "skills": {
          "type": "array",
          "description": "List of user's skills.",
          "items": {
            "type": "string"
          }
        },
        "experience": {
          "type": "string",
          "description": "User's experience description."
        },
        "languages": {
          "type": "array",
          "description": "List of languages spoken by the user.",
          "items": {
            "type": "string"
          }
        },
        "hackathonInterests": {
          "type": "array",
          "description": "List of hackathon interests.",
          "items": {
            "type": "string"
          }
        },
        "socialLinks": {
          "type": "array",
          "description": "List of social media links.",
          "items": {
            "type": "string"
          }
        }
      },
      "required": [
        "id",
        "email",
        "firstName",
        "lastName"
      ]
    },
    "TeamProfile": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "TeamProfile",
      "type": "object",
      "description": "Represents a team's profile.",
      "properties": {
        "name": {
          "type": "string",
          "description": "Team's name."
        },
        "projectDescription": {
          "type": "string",
          "description": "Description of the team's project."
        },
        "openRoles": {
          "type": "array",
          "description": "List of open roles in the team.",
          "items": {
            "type": "string"
          }
        },
        "requiredSkills": {
          "type": "array",
          "description": "List of required skills for the team.",
          "items": {
            "type": "string"
          }
        },
        "teamMemberIds": {
          "type": "array",
          "description": "References to UserProfiles. (Relationship: TeamProfile 1:N UserProfile)",
          "items": {
            "type": "string"
          }
        },
        "createdAt": {
          "type": "string",
          "format": "date-time",
          "description": "Timestamp when the team was created."
        }
      },
      "required": [
        "name",
        "projectDescription",
        "teamMemberIds"
      ]
    },
    "HackathonListing": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "HackathonListing",
      "type": "object",
      "description": "Represents a hackathon event listing.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the HackathonListing entity."
        },
        "eventName": {
          "type": "string",
          "description": "Name of the hackathon event."
        },
        "eventDetails": {
          "type": "string",
          "description": "Detailed description of the event."
        },
        "registrationLink": {
          "type": "string",
          "description": "Link to the registration page.",
          "format": "uri"
        },
        "startDate": {
          "type": "string",
          "description": "Start date and time of the hackathon.",
          "format": "date-time"
        },
        "endDate": {
          "type": "string",
          "description": "End date and time of the hackathon.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "eventName",
        "eventDetails",
        "registrationLink",
        "startDate",
        "endDate"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}",
        "definition": {
          "entityName": "UserProfile",
          "schema": {
            "$ref": "#/backend/entities/UserProfile"
          },
          "description": "Stores user profiles. Path-based ownership ensures only the user can access their own profile.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier for the user."
            }
          ]
        }
      },
      {
        "path": "/teams/{teamId}",
        "definition": {
          "entityName": "TeamProfile",
          "schema": {
            "$ref": "#/backend/entities/TeamProfile"
          },
          "description": "Stores team profiles. Includes 'teamMemberIds' array for authorization independence. Used to determine team membership and access rights.",
          "params": [
            {
              "name": "teamId",
              "description": "The unique identifier for the team."
            }
          ]
        }
      },
      {
        "path": "/hackathons/{hackathonId}",
        "definition": {
          "entityName": "HackathonListing",
          "schema": {
            "$ref": "#/backend/entities/HackathonListing"
          },
          "description": "Stores hackathon listings. Publicly accessible data.",
          "params": [
            {
              "name": "hackathonId",
              "description": "The unique identifier for the hackathon event."
            }
          ]
        }
      }
    ],
    "reasoning": "The Firestore structure is designed to support the core features of the Nexus Teams application, focusing on user profiles, team profiles, and hackathon listings. The design emphasizes authorization independence, clarity, and scalability. User profiles are stored under `/users/{userId}` for private user data. Team profiles are stored in the `/teams/{teamId}` collection. Hackathon listings are stored in the `/hackathons/{hackathonId}` collection and are publicly accessible.\n\nAuthorization Independence: Authorization is achieved primarily through path-based ownership for user profiles. Team access control is managed via a `teamMemberIds` field in each team profile which can be used for authorization logic. To support authorization independence and avoid using `get()` calls in security rules, the `teamMemberIds` field in the `TeamProfile` is crucial.\n\nQAPs Support: This structure supports QAPs by segregating data based on access needs. User profiles are private, team profiles are accessible to team members, and hackathon listings are public. The separation simplifies security rules and ensures that list operations are secure."
  }
}